<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Loss &#8212; zfit 0.1.dev446+gef86a18 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Minimization" href="minimize.html" />
    <link rel="prev" title="Data" href="data.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-2.3.2/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="../index.html">
          zfit</a>
        <span class="navbar-text pull-left"><b>0.1.dev446</b></span>

        <div class="nav-collapse">
          <ul class="nav">
            <li class="divider-vertical"></li>
            
                <li><a href="../getting_started.html">Getting started</a></li>
                <li><a href="../introduction.html">Intro</a></li>
                <li><a href="../project.html">Project</a></li>
                <li><a href="../API.html">API</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Overview <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started with zfit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#what-did-just-happen">What did just happen?</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../introduction.html">zfit introduction</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="space.html">Space, Observable and Range</a><ul>
<li class="toctree-l3"><a class="reference internal" href="space.html#definitions">Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="space.html#limits">Limits</a><ul>
<li class="toctree-l4"><a class="reference internal" href="space.html#defining-limits">Defining limits</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="parameter.html">Parameter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="parameter.html#independent-parameter">Independent Parameter</a></li>
<li class="toctree-l3"><a class="reference internal" href="parameter.html#dependent-parameter">Dependent Parameter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="model.html">Building a model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="model.html#predefined-pdfs-and-basic-properties">Predefined PDFs and basic properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="model.html#composite-pdf">Composite PDF</a></li>
<li class="toctree-l3"><a class="reference internal" href="model.html#extended-pdf">Extended PDF</a></li>
<li class="toctree-l3"><a class="reference internal" href="model.html#custom-pdf">Custom PDF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="model.html#sampling-from-a-model">Sampling from a Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="model.html#tensor-sampling">Tensor sampling</a></li>
<li class="toctree-l4"><a class="reference internal" href="model.html#playing-with-toys-multiple-samplings">Playing with toys: Multiple samplings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="data.html">Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="data.html#import-dataset-from-a-root-file">Import dataset from a ROOT file</a></li>
<li class="toctree-l3"><a class="reference internal" href="data.html#import-dataset-from-a-pandas-dataframe-or-numpy-ndarray">Import dataset from a pandas DataFrame or Numpy ndarray</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Loss</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adding-constraints">Adding constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simultaneous-fits">Simultaneous fits</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="minimize.html">Minimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="minimize.html#baseline-minimizers">Baseline minimizers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../project.html">zfit Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../project/installation.html">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../project/installation.html#stable-release">Stable release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/installation.html#from-sources">From sources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../project/contributing.html">Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../project/contributing.html#get-started">Get Started!</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/contributing.html#pull-request-guidelines">Pull Request Guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../project/upgrade_guide.html">Upgrade guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../project/upgrade_guide.html#upgrade-from-zfit-0-3-x-to-0-4-0">Upgrade from zfit 0.3.x to 0.4.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/upgrade_guide.html#dependents">Dependents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../project/changelog.html">Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#develop">Develop</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#major-features-and-improvements">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#behavioral-changes">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#bug-fixes-and-small-changes">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#requirement-changes">Requirement changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#thanks">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id3">0.3.7 (6.12.19)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id4">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id5">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id6">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id7">Requirement changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id8">0.3.6 (12.10.19)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id9">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id10">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id11">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id12">Requirement changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id13">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id14">0.3.4 (30-07-19)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id15">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id16">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id17">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id18">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id19">0.3.3 (15-05-19)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id20">0.3.2 (01-05-19)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#breaking-changes">Breaking changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#bugfixes">Bugfixes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#improvements">Improvements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id21">0.3.1 (30-04-19)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id22">0.3.0 (2019-03-20)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id23">0.0.1 (2018-03-22)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../project/authors.html">Credits</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../project/authors.html#development-lead">Development Lead</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/authors.html#authors">Authors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/authors.html#contributors">Contributors</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../API.html">zfit API documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/zfit.html">zfit package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/zfit.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.core.html">core</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../api/zfit.core.html#submodules">Submodules</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.basefunc.html">basefunc</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.basemodel.html">basemodel</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.baseobject.html">baseobject</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.basepdf.html">basepdf</a><ul>
<li class="toctree-l7"><a class="reference internal" href="../api/zfit.core.basepdf.html#defining-your-own-pdf">Defining your own pdf</a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.constraint.html">constraint</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.data.html">data</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.dependents.html">dependents</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.dimension.html">dimension</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.integration.html">integration</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.interfaces.html">interfaces</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.limits.html">limits</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.loss.html">loss</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.operations.html">operations</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.parameter.html">parameter</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.sample.html">sample</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.core.testing.html">testing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.minimizers.html">minimizers</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../api/zfit.minimizers.html#submodules">Submodules</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.minimizers.base_tf.html">base_tf</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.minimizers.baseminimizer.html">baseminimizer</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.minimizers.fitresult.html">fitresult</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.minimizers.interface.html">interface</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.minimizers.minimizer_minuit.html">minimizer_minuit</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.minimizers.minimizer_tfp.html">minimizer_tfp</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.minimizers.minimizers_scipy.html">minimizers_scipy</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.minimizers.optimizers_tf.html">optimizers_tf</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.minimizers.tf_external_optimizer.html">tf_external_optimizer</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.models.html">models</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../api/zfit.models.html#submodules">Submodules</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.models.basefunctor.html">basefunctor</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.models.basic.html">basic</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.models.dist_tfp.html">dist_tfp</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.models.functions.html">functions</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.models.functor.html">functor</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.models.physics.html">physics</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.models.polynomials.html">polynomials</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.models.special.html">special</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.util.html">util</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../api/zfit.util.html#submodules">Submodules</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.util.cache.html">cache</a><ul>
<li class="toctree-l7"><a class="reference internal" href="../api/zfit.util.cache.html#basic-principle">Basic principle</a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.util.checks.html">checks</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.util.container.html">container</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.util.diverse.html">diverse</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.util.exception.html">exception</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.util.execution.html">execution</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.util.graph.html">graph</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.util.logging.html">logging</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.util.temporary.html">temporary</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.util.ztyping.html">ztyping</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.z.html">z</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../api/zfit.z.html#submodules">Submodules</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.z.const.html">const</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.z.math.html">math</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.z.random.html">random</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.z.tools.html">tools</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.z.wrapping_tf.html">wrapping_tf</a></li>
<li class="toctree-l6"><a class="reference internal" href="../api/zfit.z.zextension.html">zextension</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/zfit.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.constraint.html">constraint</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.data.html">data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.func.html">func</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.loss.html">loss</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.minimize.html">minimize</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.param.html">param</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.pdf.html">pdf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.sample.html">sample</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.settings.html">settings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api/zfit.pdf.html">pdf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/zfit.func.html">func</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/zfit.data.html">data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/zfit.loss.html">loss</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/zfit.constraint.html">constraint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/zfit.minimize.html">minimize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/zfit.minimizers.fitresult.html">fitresult</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/zfit.settings.html">settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/zfit.z.html">z</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/zfit.z.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.z.const.html">const</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.z.math.html">math</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.z.random.html">random</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.z.tools.html">tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.z.wrapping_tf.html">wrapping_tf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/zfit.z.zextension.html">zextension</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Loss</a><ul>
<li><a class="reference internal" href="#adding-constraints">Adding constraints</a></li>
<li><a class="reference internal" href="#simultaneous-fits">Simultaneous fits</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
      </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body span12 content" role="main">
      
  <div class="section" id="loss">
<span id="id1"></span><h1>Loss<a class="headerlink" href="#loss" title="Permalink to this headline">¶</a></h1>
<p>A <em>loss function</em> can be defined as a measurement of the discrepancy between the observed data and the predicted data by the fitted function.
To some extent it can be visualised as a metric of the goodness of a given prediction as you change the settings of your algorithm.
For example, in a general linear model the loss function is essentially the sum of squared deviations from the fitted line or plane.
A more useful application in the context of High Energy Physics (HEP) is the Maximum Likelihood Estimator (MLE).
The MLE is a specific type of probability model estimation, where the loss function is the negative log-likelihood (NLL).</p>
<p>In zfit, loss functions inherit from the <a class="reference internal" href="../api/zfit.loss.html#zfit.loss.BaseLoss" title="zfit.loss.BaseLoss"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseLoss</span></code></a> class and they follow a common interface, in which the model,
the dataset <strong>must</strong> be given, and
where parameter constraints in form of a dictionary <cite>{param: constraint}</cite> <strong>may</strong> be given.
As an example, we can create an unbinned negative log-likelihood loss (<a class="reference internal" href="../api/zfit.loss.html#zfit.loss.UnbinnedNLL" title="zfit.loss.UnbinnedNLL"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnbinnedNLL</span></code></a>) from the model described in the <span class="xref std std-ref">Basic model section</span> and the data from the <a class="reference internal" href="data.html#data-section"><span class="std std-ref">Data section</span></a>:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_loss</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">loss</span><span class="o">.</span><span class="n">UnbinnedNLL</span><span class="p">(</span><span class="n">model_cb</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                <span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="adding-constraints">
<h2>Adding constraints<a class="headerlink" href="#adding-constraints" title="Permalink to this headline">¶</a></h2>
<p>Constraints (or, in general, penalty terms) can be added to the loss function either by using the <code class="docutils literal notranslate"><span class="pre">constraints</span></code> keyword when creating the loss object or by using the <a class="reference internal" href="../api/zfit.loss.html#zfit.loss.BaseLoss.add_constraints" title="zfit.loss.BaseLoss.add_constraints"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_constraints()</span></code></a> method.
These constraints are specified as a list of penalty terms, which can be any object inheriting from <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseConstraint</span></code> that is simply added to the calculation of the loss.</p>
<p>Useful implementations of penalties can be found in the <a class="reference internal" href="../api/zfit.constraint.html#module-zfit.constraint" title="zfit.constraint"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zfit.constraint</span></code></a> module.
For example, if we wanted to add a gaussian constraint on the <code class="docutils literal notranslate"><span class="pre">mu</span></code> parameter of the previous model, we would write:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">constraint</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">constraint</span><span class="o">.</span><span class="n">GaussianConstraint</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="n">mu</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mf">5279.</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mf">10.</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">my_loss</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">loss</span><span class="o">.</span><span class="n">UnbinnedNLL</span><span class="p">(</span><span class="n">model_cb</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                <span class="n">data</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                <span class="n">constraints</span><span class="o">=</span><span class="n">constraint</span><span class="p">)</span>
</pre></div>
</div>
<p>Custom penalties can also be added to the loss function, for instance if you want to set limits on a parameter:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">custom_constraint</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">max_value</span><span class="p">):</span>
<span class="go">        return tf.cond(tf.greater_equal(param, max_value), lambda: 10000., lambda: 0.)</span>
</pre></div>
</div>
<p>The custom penalty needs to be callable to be added to the loss function</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_loss</span><span class="o">.</span><span class="n">add_constraints</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">custom_constraint</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="mi">5400</span><span class="p">))</span>
</pre></div>
</div>
<p>or equivalently</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">simple_constraint</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">constraint</span><span class="o">.</span><span class="n">SimpleConstraint</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">custom_constraint</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="mi">5400</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_loss</span><span class="o">.</span><span class="n">add_constraints</span><span class="p">(</span><span class="n">simple_constraint</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example if the value of <code class="docutils literal notranslate"><span class="pre">param</span></code> is larger than <code class="docutils literal notranslate"><span class="pre">max_value</span></code> a large value is added the loss function
driving it away from the minimum.</p>
</div>
<div class="section" id="simultaneous-fits">
<h2>Simultaneous fits<a class="headerlink" href="#simultaneous-fits" title="Permalink to this headline">¶</a></h2>
<p>There are currently two loss functions implementations in the <code class="docutils literal notranslate"><span class="pre">zfit</span></code> library, the <a class="reference internal" href="../api/zfit.loss.html#zfit.loss.UnbinnedNLL" title="zfit.loss.UnbinnedNLL"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnbinnedNLL</span></code></a> and <a class="reference internal" href="../api/zfit.loss.html#zfit.loss.ExtendedUnbinnedNLL" title="zfit.loss.ExtendedUnbinnedNLL"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtendedUnbinnedNLL</span></code></a> classes, which cover non-extended and extended negative log-likelihoods.</p>
<p>A very common use case of likelihood fits in HEP is the possibility to examine simultaneously different datasets (that can be independent or somehow correlated).
To build loss functions for simultaneous fits, the addition operator can be used (the particular combination that is performed depends on the type of loss function):</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">models</span> <span class="o">=</span> <span class="p">[</span><span class="n">model1</span><span class="p">,</span> <span class="n">model2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">datasets</span> <span class="o">=</span> <span class="p">[</span><span class="n">data1</span><span class="p">,</span> <span class="n">data2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_loss1</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">loss</span><span class="o">.</span><span class="n">UnbinnedNLL</span><span class="p">(</span><span class="n">models</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">fit_range</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_loss2</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">loss</span><span class="o">.</span><span class="n">UnbinnedNLL</span><span class="p">(</span><span class="n">models</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">datasets</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">fit_range</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_loss_sim_operator</span> <span class="o">=</span> <span class="n">my_loss1</span> <span class="o">+</span> <span class="n">my_loss2</span>
</pre></div>
</div>
<p>The same result can be achieved by passing a list of PDFs on instantiation, along with the same number of datasets:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Adding a list of models and datasets</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_loss_sim</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">loss</span><span class="o">.</span><span class="n">UnbinnedNLL</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="p">[</span><span class="n">model1</span><span class="p">,</span> <span class="n">model2</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="n">data1</span><span class="p">,</span> <span class="n">data2</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/intro/loss.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright Copyright 2018, zfit.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>