<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Building a model &#8212; zfit 0.0.0 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-2.3.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data" href="data.html" />
    <link rel="prev" title="Parameter" href="parameter.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="index.html">
          zfit</a>
        <span class="navbar-text pull-left"><b>0.0.0</b></span>

        <div class="nav-collapse">
          <ul class="nav">
            <li class="divider-vertical"></li>
            
                <li><a href="getting_started.html">Getting started</a></li>
                <li><a href="space.html">Space</a></li>
                <li><a href="parameter.html">Parameter</a></li>
                <li><a href="#">Model</a></li>
                <li><a href="data.html">Data</a></li>
                <li><a href="loss.html">Loss</a></li>
                <li><a href="minimize.html">Minimize</a></li>
                <li><a href="API.html">API</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started with zfit</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading.html">Downloading and Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="space.html">Space, Observable and Range</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameter.html">Parameter</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Building a model</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="loss.html">Loss</a></li>
<li class="toctree-l1"><a class="reference internal" href="minimize.html">Minimization</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="API.html">zfit API documentation</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
      </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="span12 content">
      
  <div class="section" id="building-a-model">
<h1>Building a model<a class="headerlink" href="#building-a-model" title="Permalink to this headline">¶</a></h1>
<p>In order to build a generic model the concept of function and distributed density functions (PDFs) need to be clarified.
The PDF, or density of a continuous random variable, of X is a function f(x) that describes the relative likelihood for this random variable to take on a given value.
In this sense, for any two numbers a and b with <span class="math notranslate nohighlight">\(a \leq b\)</span>,</p>
<p><span class="math notranslate nohighlight">\(P(a \leq X \leq b) = \int^{b}_{a}f(X)dx\)</span></p>
<p>That is, the probability that X takes on a value in the interval <span class="math notranslate nohighlight">\([a, b]\)</span> is the area above this interval and under the graph of the density function.
In other words, in order to a function to be a PDF it must satisfy two criteria:</p>
<ol class="arabic simple">
<li><span class="math notranslate nohighlight">\(f(x) \geq 0\)</span> for all x;</li>
<li><span class="math notranslate nohighlight">\(\int^{\infty}_{-\infty}f(x)dx =\)</span> are under the entire graph of <span class="math notranslate nohighlight">\(f(x)=1\)</span>.</li>
</ol>
<p>In zfit these distinctions are respected, <em>i.e.</em>, a function can be converted into a PDF by imposing the basic two criteria above.</p>
<div class="section" id="predefined-pdfs-and-basic-properties">
<span id="basic-model"></span><h2>Predefined PDFs and basic properties<a class="headerlink" href="#predefined-pdfs-and-basic-properties" title="Permalink to this headline">¶</a></h2>
<p>A series of predefined PDFs are available to the users and can be easily accessed using autocompletion (if available). In fact, all of these can also be seen in</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">zfit</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">__all__</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;BasePDF&#39;</span><span class="p">,</span> <span class="s1">&#39;Exponential&#39;</span><span class="p">,</span> <span class="s1">&#39;CrystalBall&#39;</span><span class="p">,</span> <span class="s1">&#39;Gauss&#39;</span><span class="p">,</span> <span class="s1">&#39;Uniform&#39;</span><span class="p">,</span> <span class="s1">&#39;WrapDistribution&#39;</span><span class="p">,</span> <span class="s1">&#39;ProductPDF&#39;</span><span class="p">,</span> <span class="s1">&#39;SumPDF&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>These include the basic function but also some operations discussed below. Let’s consider the simple example of a <code class="docutils literal notranslate"><span class="pre">CrystalBall</span></code>.
PDF objects must also be initialised giving their named parameters. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creating the parameters for the crystal ball</span>
<span class="n">mu</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;mu&quot;</span><span class="p">,</span> <span class="mi">5279</span><span class="p">,</span> <span class="mi">5100</span><span class="p">,</span> <span class="mi">5300</span><span class="p">)</span>
<span class="n">sigma</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;sigma&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="c1"># Single crystal Ball</span>
<span class="n">model_cb</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">CrystalBall</span><span class="p">(</span><span class="n">obs</span><span class="o">=</span><span class="n">obs</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case the CB object corresponds to a normalised PDF. The main properties of a PDF, e.g. the probability for a given normalisation range or even
to set a temporary normalisation range can be given as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the probabilities of some random generated events</span>
<span class="n">probs</span> <span class="o">=</span> <span class="n">model_cb</span><span class="o">.</span><span class="n">prob</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">norm_range</span><span class="o">=</span><span class="p">(</span><span class="mi">5100</span><span class="p">,</span> <span class="mi">5400</span><span class="p">))</span>

<span class="c1"># Performing evaluation within a given range</span>
<span class="k">with</span> <span class="n">model_cb</span><span class="o">.</span><span class="n">temp_norm_range</span><span class="p">((</span><span class="mi">5000</span><span class="p">,</span> <span class="mi">6000</span><span class="p">)):</span>
    <span class="n">model_cb</span><span class="o">.</span><span class="n">prob</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>  <span class="c1"># norm_range is now set</span>
</pre></div>
</div>
<p>Another feature for the PDF is to calculate its integral in a certain limit. This can be easily achieved by</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calculate the integral between 5230 and 5230 over the PDF normalized</span>
<span class="n">integral_norm</span> <span class="o">=</span> <span class="n">model_cb</span><span class="o">.</span><span class="n">integrate</span><span class="p">(</span><span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="mi">5230</span><span class="p">,</span> <span class="mi">5230</span><span class="p">))</span>
</pre></div>
</div>
<p>In this case the CB has been normalised using the range defined in the observable.
Conversely, the <code class="docutils literal notranslate"><span class="pre">norm_range</span></code> in which the PDF is normalised can also be specified as input.</p>
</div>
<div class="section" id="composite-pdf">
<h2>Composite PDF<a class="headerlink" href="#composite-pdf" title="Permalink to this headline">¶</a></h2>
<p>A common feature in building composite models it the ability to combine in terms of sum and products different PDFs.
There are two ways to create such models, either with the class API or with simple Python syntax.
Let’s consider a second crystal ball with the same mean position and width, but different tail parameters</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># New tail parameters for the second CB</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;a2&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
<span class="n">n2</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;n2&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="c1"># New crystal Ball function defined in the same observable range</span>
<span class="n">model_cb2</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">CrystalBall</span><span class="p">(</span><span class="n">obs</span><span class="o">=</span><span class="n">obs</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">a2</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">n2</span><span class="p">)</span>
</pre></div>
</div>
<p>We can now combine these two PDFs to create a double Crystal Ball with a single mean and width, either using arithmetic operations</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># First needs to define a parameters that represent</span>
<span class="c1"># the relative fraction between the two PDFs</span>
<span class="n">frac</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;frac&quot;</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Two different ways to combine</span>
<span class="n">double_cb</span> <span class="o">=</span> <span class="n">frac</span> <span class="o">*</span> <span class="n">model_cb</span> <span class="o">+</span> <span class="n">model_cb2</span>
</pre></div>
</div>
<p>Or through the <a class="reference internal" href="api/zfit.pdf.html#zfit.pdf.SumPDF" title="zfit.pdf.SumPDF"><code class="xref py py-class docutils literal notranslate"><span class="pre">zfit.pdf.SumPDF</span></code></a> class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># or via the class API</span>
<span class="n">double_cb_class</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">SumPDF</span><span class="p">(</span><span class="n">pdfs</span><span class="o">=</span><span class="p">[</span><span class="n">model_cb</span><span class="p">,</span> <span class="n">model_cb2</span><span class="p">],</span> <span class="n">fracs</span><span class="o">=</span><span class="n">frac</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice that the new PDF has the same observables as the original ones, as they coincide.
Alternatively one could consider having PDFs for different axis, which would then create a totalPDF with higher dimension.</p>
<p>A simple extension of these operations is if we want to instead of a sum of PDFs, to model a two-dimensional Gaussian (e.g.):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Defining two Gaussians in two different axis (obs)</span>
<span class="n">mu1</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;mu1&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">sigma1</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;sigma1&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">gauss1</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">Gauss</span><span class="p">(</span><span class="n">obs</span><span class="o">=</span><span class="s2">&quot;obs1&quot;</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="n">mu1</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma1</span><span class="p">)</span>

<span class="n">mu2</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;mu2&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">sigma2</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;sigma2&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">gauss2</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">Gauss</span><span class="p">(</span><span class="n">obs</span><span class="o">=</span><span class="s2">&quot;obs2&quot;</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="n">mu2</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma2</span><span class="p">)</span>

<span class="c1"># Producing the product of two PDFs</span>
<span class="n">prod_gauss</span> <span class="o">=</span> <span class="n">gauss1</span> <span class="o">*</span> <span class="n">gauss2</span>
<span class="c1"># Or alternatively</span>
<span class="n">prod_gauss_class</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ProductPDF</span><span class="p">(</span><span class="n">pdfs</span><span class="o">=</span><span class="p">[</span><span class="n">gauss2</span><span class="p">,</span> <span class="n">gauss1</span><span class="p">])</span>  <span class="c1"># notice the different order or the pdf</span>
</pre></div>
</div>
<p>The new PDF is now in two dimensions.
The order of the observables follows the order of the PDFs given.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s2">&quot;python syntax product obs&quot;</span><span class="p">,</span> <span class="n">prod_gauss</span><span class="o">.</span><span class="n">obs</span><span class="p">)</span>
<span class="p">[</span><span class="n">python</span> <span class="n">syntax</span> <span class="n">product</span> <span class="n">obs</span> <span class="p">(</span><span class="s1">&#39;obs1&#39;</span><span class="p">,</span> <span class="s1">&#39;obs2&#39;</span><span class="p">)]</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;class API product obs&quot;</span><span class="p">,</span> <span class="n">prod_gauss_class</span><span class="o">.</span><span class="n">obs</span><span class="p">)</span>
<span class="p">[</span><span class="k">class</span> <span class="nc">API</span> <span class="n">product</span> <span class="n">obs</span> <span class="p">(</span><span class="s1">&#39;obs2&#39;</span><span class="p">,</span> <span class="s1">&#39;obs1&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="section" id="extended-pdf">
<h2>Extended PDF<a class="headerlink" href="#extended-pdf" title="Permalink to this headline">¶</a></h2>
<p>In the event there are different <em>species</em> of distributions in a given observable,
the simple sum of PDFs does not a priori provides the absolute number of events for each specie but rather the fraction as seen above.
An example is a Gaussian mass distribution with an exponential background, e.g.</p>
<p><span class="math notranslate nohighlight">\(P = f_{S}\frac{1}{\sqrt{2\pi}\sigma} e^{-\frac{(x-\mu)^{2}}{2\sigma^{2}}} + (1 - f_{S}) e^{-\alpha x}\)</span></p>
<p>Since we are interested to express a measurement of the number of events,
the expression <span class="math notranslate nohighlight">\(M(x) = N_{S}S(x) + N_{B}B(x)\)</span> respect that M(x) is normalised to <span class="math notranslate nohighlight">\(N_{S} + N_{B} = N\)</span> instead of one.
This means that <span class="math notranslate nohighlight">\(M(x)\)</span> is not a true PDF but rather an expression for two quantities, the shape and the number of events in the distributions.</p>
<p>An extended PDF can be easily implemented in zfit in two ways:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a parameter for the number of events</span>
<span class="n">yieldGauss</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;yieldGauss&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1"># Extended PDF using a predefined method</span>
<span class="n">extended_gauss_method</span> <span class="o">=</span> <span class="n">gauss</span><span class="o">.</span><span class="n">create_extended</span><span class="p">(</span><span class="n">yieldGauss</span><span class="p">)</span>
<span class="c1"># Or simply with a Python syntax of multiplying a PDF with the parameter</span>
<span class="n">extended_gauss_python</span> <span class="o">=</span> <span class="n">yieldGauss</span> <span class="o">*</span> <span class="n">gauss</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-pdf">
<h2>Custom PDF<a class="headerlink" href="#custom-pdf" title="Permalink to this headline">¶</a></h2>
<p>A fundamental design choice of zfit is the ability to create custom PDFs and functions in an easy way.
Let’s consider a simplified implementation</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyGauss</span><span class="p">(</span><span class="n">zfit</span><span class="o">.</span><span class="n">pdf</span><span class="o">.</span><span class="n">ZPDF</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Simple implementation of a Gaussian similar to :py:class`~zfit.pdf.Gauss` class&quot;&quot;&quot;</span>
    <span class="n">_N_OBS</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># dimension, can be omitted</span>
    <span class="n">_PARAMS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">]</span>  <span class="c1"># the name of the parameters</span>

<span class="k">def</span> <span class="nf">_unnormalized_pdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">ztf</span><span class="o">.</span><span class="n">unstack_x</span><span class="p">()</span>
    <span class="n">mean</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">]</span>
    <span class="n">std</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;std&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">ztf</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span> <span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span><span class="o">/</span><span class="n">std</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>This is the basic information required for this custom PDF.
With this new PDF one can access the same feature of the predefined PDFs, e.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">obs</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Space</span><span class="p">(</span><span class="s2">&quot;obs1&quot;</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">mean</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">std</span>  <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
<span class="n">my_gauss</span> <span class="o">=</span> <span class="n">MyGauss</span><span class="p">(</span><span class="n">obs</span><span class="o">=</span><span class="s1">&#39;obs1&#39;</span><span class="p">,</span> <span class="n">mean</span><span class="o">=</span><span class="n">mean</span><span class="p">,</span> <span class="n">std</span><span class="o">=</span><span class="n">std</span><span class="p">)</span>

<span class="c1"># For instance integral probabilities</span>
<span class="n">integral</span> <span class="o">=</span> <span class="n">my_gauss</span><span class="o">.</span><span class="n">integrate</span><span class="p">(</span><span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">probs</span>    <span class="o">=</span> <span class="n">my_gauss</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">norm_range</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
<p>Finally, we could also improve the description of the PDF by providing a analytical integral for the <code class="docutils literal notranslate"><span class="pre">MyGauss</span></code> PDF:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">gauss_integral_from_any_to_any</span><span class="p">(</span><span class="n">limits</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
    <span class="p">(</span><span class="n">lower</span><span class="p">,),</span> <span class="p">(</span><span class="n">upper</span><span class="p">,)</span> <span class="o">=</span> <span class="n">limits</span><span class="o">.</span><span class="n">limits</span>
    <span class="n">mean</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">]</span>
    <span class="n">std</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;std&#39;</span><span class="p">]</span>
    <span class="c1"># Write you integral</span>
    <span class="k">return</span> <span class="mf">42.</span> <span class="c1"># Dummy value</span>

<span class="c1"># Register the integral</span>
<span class="n">limits</span> <span class="o">=</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Space</span><span class="o">.</span><span class="n">from_axes</span><span class="p">(</span><span class="n">axes</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="n">zfit</span><span class="o">.</span><span class="n">Space</span><span class="o">.</span><span class="n">ANY_LOWER</span><span class="p">,</span> <span class="n">zfit</span><span class="o">.</span><span class="n">Space</span><span class="o">.</span><span class="n">ANY_UPPER</span><span class="p">))</span>
<span class="n">MyGauss</span><span class="o">.</span><span class="n">register_analytic_integral</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">gauss_integral_from_any_to_any</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="n">limits</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="sampling-from-a-pdf">
<h2>Sampling from a PDF<a class="headerlink" href="#sampling-from-a-pdf" title="Permalink to this headline">¶</a></h2>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, zfit.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>