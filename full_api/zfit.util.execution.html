<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>execution &#8212; zfit 0.5.3.dev6+gc8f9df0 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-2.3.2/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="../index.html"><img src="../_static/zfit-fin_57x24.png">
          zfit</a>
        <span class="navbar-text pull-left"><b>0.5.3.dev6</b></span>

        <div class="nav-collapse">
          <ul class="nav">
            <li class="divider-vertical"></li>
            
                <li><a href="../getting_started.html">Getting started</a></li>
                <li><a href="../introduction.html">Intro</a></li>
                <li><a href="../project.html">Project</a></li>
                <li><a href="../user_api.html">API</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Overview <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#what-did-just-happen">What did just happen?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">zfit introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/space.html">Space, Observable and Range</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro/space.html#definitions">Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro/space.html#limits">Limits</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../intro/space.html#functional-limits">Functional limits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intro/space.html#combining-limits">Combining limits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intro/space.html#using-the-limits">Using the limits</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../intro/parameter.html">Parameter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro/parameter.html#independent-parameter">Independent Parameter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro/parameter.html#dependent-parameter">Dependent Parameter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../intro/model.html">Building a model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro/model.html#predefined-pdfs-and-basic-properties">Predefined PDFs and basic properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro/model.html#composite-pdf">Composite PDF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro/model.html#extended-pdf">Extended PDF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro/model.html#custom-pdf">Custom PDF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../intro/model.html#sampling-from-a-model">Sampling from a Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intro/model.html#tensor-sampling">Tensor sampling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intro/model.html#playing-with-toys-multiple-samplings">Playing with toys: Multiple samplings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../intro/data.html">Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro/data.html#import-dataset-from-a-root-file">Import dataset from a ROOT file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro/data.html#import-dataset-from-a-pandas-dataframe-or-numpy-ndarray">Import dataset from a pandas DataFrame or Numpy ndarray</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../intro/loss.html">Loss</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro/loss.html#adding-constraints">Adding constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro/loss.html#simultaneous-fits">Simultaneous fits</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../intro/minimize.html">Minimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro/minimize.html#baseline-minimizers">Baseline minimizers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../project.html">zfit Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../project/installation.html">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../project/installation.html#stable-release">Stable release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/installation.html#from-sources">From sources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../project/contributing.html">Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../project/contributing.html#get-started">Get Started!</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/contributing.html#pull-request-guidelines">Pull Request Guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../project/upgrade_guide.html">Upgrade guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../project/upgrade_guide.html#upgrade-from-zfit-0-3-x-to-0-4-0">Upgrade from zfit 0.3.x to 0.4.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/upgrade_guide.html#dependents">Dependents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../project/changelog.html">Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#develop">Develop</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#major-features-and-improvements">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#breaking-changes">Breaking changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#depreceations">Depreceations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#bug-fixes-and-small-changes">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#experimental">Experimental</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#requirement-changes">Requirement changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#thanks">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id1">0.5.2 (13.05.2020)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id2">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id3">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id4">Requirement changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id5">0.5.1 (24.04.2020)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id6">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id7">Breaking changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id8">Depreceations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id9">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id10">Experimental</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id11">Requirement changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id12">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id13">0.4.3 (11.3.2020)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id14">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#behavioral-changes">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id15">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id16">Requirement changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id17">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id18">0.4.2 (27.2.2020)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id19">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id20">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id21">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id22">Requirement changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id23">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id24">0.4.1 (12.1.20)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id25">Major Features and Improvements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id26">0.4.0 (7.1.2020)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id27">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id28">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id29">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id30">Requirement changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id31">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id32">0.3.7 (6.12.19)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id33">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id34">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id35">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id36">Requirement changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id37">0.3.6 (12.10.19)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id38">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id39">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id40">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id41">Requirement changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id42">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id43">0.3.4 (30-07-19)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id44">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id45">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id46">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id47">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id48">0.3.3 (15-05-19)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id49">0.3.2 (01-05-19)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id50">Breaking changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#bugfixes">Bugfixes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#improvements">Improvements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id51">0.3.1 (30-04-19)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id52">0.3.0 (2019-03-20)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id53">0.0.1 (2018-03-22)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../project/authors.html">Development Lead</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/authors.html#authors">Authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/authors.html#contributors">Contributors</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_api.html">zfit API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user_api/zfit.html">zfit package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user_api/zfit.html#submodules">Submodules</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">execution</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
      </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body span12 content" role="main">
      
  <div class="section" id="module-zfit.util.execution">
<span id="execution"></span><h1>execution<a class="headerlink" href="#module-zfit.util.execution" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="zfit.util.execution.RunManager">
<em class="property">class </em><code class="sig-prename descclassname">zfit.util.execution.</code><code class="sig-name descname">RunManager</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n_cpu</span><span class="o">=</span><span class="default_value">'auto'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Handle the resources and runtime specific options. The <cite>run</cite> method is equivalent to <cite>sess.run</cite></p>
<dl class="py attribute">
<dt id="zfit.util.execution.RunManager.DEFAULT_MODE">
<code class="sig-name descname">DEFAULT_MODE</code><em class="property"> = {'autograd': True, 'graph': 'auto'}</em><a class="headerlink" href="#zfit.util.execution.RunManager.DEFAULT_MODE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.aquire_cpu">
<code class="sig-name descname">aquire_cpu</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">max_cpu</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)">int</a></span> <span class="o">=</span> <span class="default_value">- 1</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a><span class="p">]</span><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.aquire_cpu"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.aquire_cpu" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.assert_executing_eagerly">
<code class="sig-name descname">assert_executing_eagerly</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.assert_executing_eagerly"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.assert_executing_eagerly" title="Permalink to this definition">¶</a></dt>
<dd><p>Assert that the execution is eager and Python side effects are taken into account.</p>
<p>This can be placed inside a model _in case python side-effects are <a href="#id1"><span class="problematic" id="id2">necessary_</span></a> and no other way is possible.</p>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.chunksize">
<em class="property">property </em><code class="sig-name descname">chunksize</code><a class="headerlink" href="#zfit.util.execution.RunManager.chunksize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.clear_graph_cache">
<code class="sig-name descname">clear_graph_cache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.clear_graph_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.clear_graph_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear all generated graphs and effectively reset. Should not affect execution, only performance.</p>
<p>In a simple fit scenario, this is not used. But if several fits are performed with different python objects
such as a scan over a range (by changing the norm_range and creating a new dataset), doing minimization and
therefore invoking the loss (by default creating a graph) will leave the graphs in the cache, even tough
the already scanned ranges are not needed anymore.</p>
<p>To clean, this function can be invoked. The only effect should be to speed up things, but should not have
any side-effects other than that.</p>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.current_policy_autograd">
<code class="sig-name descname">current_policy_autograd</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.current_policy_autograd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.current_policy_autograd" title="Permalink to this definition">¶</a></dt>
<dd><p>DEPRECATED! Use <cite>get_autograd_mode</cite> instead.</p>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.current_policy_graph">
<code class="sig-name descname">current_policy_graph</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a><span class="p">]</span><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.current_policy_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.current_policy_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>DEPRECEATED! Use <cite>get_graph_mode</cite> instead. (deprecated)</p>
<p>Warning: THIS FUNCTION IS DEPRECATED. It will be removed in a future version.
Instructions for updating:
Use <cite>get_graph_mode</cite> instead.</p>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.experimental_clear_caches">
<code class="sig-name descname">experimental_clear_caches</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.experimental_clear_caches"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.experimental_clear_caches" title="Permalink to this definition">¶</a></dt>
<dd><p>DEPRECATED! Use <cite>clear_graph_caches</cite> instead. (deprecated)</p>
<p>Warning: THIS FUNCTION IS DEPRECATED. It will be removed in a future version.
Instructions for updating:
Use clear_graph_caches instead.</p>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.experimental_enable_eager">
<em class="property">static </em><code class="sig-name descname">experimental_enable_eager</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">eager</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.experimental_enable_eager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.experimental_enable_eager" title="Permalink to this definition">¶</a></dt>
<dd><p>DEPRECEATED! Enable eager makes tensorflow run like numpy. Useful for debugging. (deprecated)</p>
<p>Warning: THIS FUNCTION IS DEPRECATED. It will be removed in a future version.
Instructions for updating:
Use <cite>set_graph_mode(False)</cite></p>
<p>Do NOT directly mix it with Numpy (and if, also enable the numberical gradient).</p>
<p>This can BREAK in the future.</p>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.experimental_is_eager">
<em class="property">property </em><code class="sig-name descname">experimental_is_eager</code><a class="headerlink" href="#zfit.util.execution.RunManager.experimental_is_eager" title="Permalink to this definition">¶</a></dt>
<dd><p>DEPRECATED FUNCTION</p>
<p>Warning: THIS FUNCTION IS DEPRECATED. It will be removed in a future version.
Instructions for updating:
Use <cite>current_policy_graph() is False</cite></p>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.get_autograd_mode">
<code class="sig-name descname">get_autograd_mode</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.get_autograd_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.get_autograd_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>The current policy for using the automatic gradient or falling back to the numerical</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>If autograd is being used.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.get_graph_mode">
<code class="sig-name descname">get_graph_mode</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a><span class="p">]</span><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.get_graph_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.get_graph_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current policy for graph building.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The current policy. For more information, check <code class="xref py py-meth docutils literal notranslate"><span class="pre">set_mode()</span></code>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.mode">
<em class="property">property </em><code class="sig-name descname">mode</code><a class="headerlink" href="#zfit.util.execution.RunManager.mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.n_cpu">
<em class="property">property </em><code class="sig-name descname">n_cpu</code><a class="headerlink" href="#zfit.util.execution.RunManager.n_cpu" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.set_autograd_mode">
<code class="sig-name descname">set_autograd_mode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">autograd</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.set_autograd_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.set_autograd_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Use automatic or numerical gradients.</p>
<p>zfit runs on top of TensorFlow, a modern, powerful computing engine very similar in design to Numpy.
An interactive tutorial can be found at <a class="reference external" href="https://github.com/zfit/zfit-tutorials">https://github.com/zfit/zfit-tutorials</a></p>
<p><strong>automatic gradient</strong></p>
<p>A strong feature of TensorFlow is the possibility to derive an analytic expression for the gradient
by successively applying the chain rule to all of its operations. This is <em>independent</em> of whether the code
is run in graph or eager execution, but requires all operations that are dynamic to be <cite>tf.*</cite> operations.
For example, multiplying by a constant (constant as in <em>not chaning ever</em>) does not require the constant to
be a <cite>tf.constant(…)</cite> but can be a Python scalar. For example, it is also fine to use a fixed template shape
using Numpy (Scipy etc), as the template shape will stay constant (this requires though to use a
<cite>z.py_function</cite> to work, but this is another story about graph mode or not).</p>
<p>To allow to have dynamic numpy operations in a component, preferably wrapped with <cite>z.py_function</cite> instead of
forced eager, and to still retrieve a meaningful gradient, a numerical gradient has to be used.
In general, this can be achieved by setting the <cite>autograd</cite> to False. Any derivative received will then be
numerically computed. Furthermore, some minimizers (e.g. <a class="reference internal" href="zfit.minimize.html#zfit.minimize.Minuit" title="zfit.minimize.Minuit"><code class="xref py py-class docutils literal notranslate"><span class="pre">Minuit</span></code></a>) have their own way
of calculating gradients, which can be faster.
Disabling <cite>autograd</cite> and using the zfit builting numerical way of calculating the gradients and hessian can
be less stable and may raises errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>autograd</strong> – Whether the automatic gradient feature of TensorFlow should be used or a numerical procedure
instead. If any non-constant Python (numpy, scipy,…) code is used inside, this should be switched on.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.set_cpus_explicit">
<code class="sig-name descname">set_cpus_explicit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">intra</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)">int</a></span></em>, <em class="sig-param"><span class="n">inter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)">int</a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)">None</a><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.set_cpus_explicit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.set_cpus_explicit" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of threads (cpus) used for inter-op and intra-op parallelism</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intra</strong> – Number of threads used to perform an operation. For larger operations, e.g. large Tensors, this
is usually beneficial to have &gt;= 2.</p></li>
<li><p><strong>inter</strong> – Parallelization on the level of ops. This is beneficial, if many operations can be computed
independently in parallel.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.set_graph_mode">
<code class="sig-name descname">set_graph_mode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">graph</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.set_graph_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.set_graph_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the policy for graph building and the usage of automatic vs numerical gradients.</p>
<p>zfit runs on top of TensorFlow, a modern, powerful computing engine very similar in design to Numpy.
An interactive tutorial can be found at <a class="reference external" href="https://github.com/zfit/zfit-tutorials">https://github.com/zfit/zfit-tutorials</a></p>
<p><strong>Graph building</strong></p>
<p>It has two ways to be run where the first
defaults to the normal mode we are in except inside a <code class="xref py py-func docutils literal notranslate"><span class="pre">function()</span></code> decorated function. Setting
the mode allows to control the behavior of decorated functions to not always trigger a graph building.</p>
<blockquote>
<div><ul>
<li><dl class="simple">
<dt><strong>numpy-like/eager</strong>: in this mode, the syntax slightly differs from pure numpy but is similar. For example,</dt><dd><p><cite>tf.sqrt</cite>, <cite>tf.math.log</cite> etc. The return values are <cite>EagerTensors</cite> that represent “wrapped Numpy arrays” and
can directly be used with any Numpy function. They can explicitly be converted to a Numpy array with
<cite>zfit.run(EagerTensor)</cite>, which takes also care of nested structures and already existing <cite>np.ndarrays</cite>,
or just a <cite>.numpy()</cite> method.
The difference to Numpy is that TensorFlow tries to optimize the calculation slightly beforehand and may
also executes on the GPU. This will result in a slight performance penalty for <em>very small</em> computations
compared to Numpy, on the other hand an improved performance for larger computations.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>graph</strong>: a function can be decorated with <code class="xref py py-func docutils literal notranslate"><span class="pre">function()</span></code>, which will <em>not</em> execute its</dt><dd><p>content immediately, but first trace it and build a graph. This is done by <em>recording all `tf.*` operations
and adding them to the graph while any Python operation, e.g. `np.random.*` will use a fixed value added
to the graph. Building a graph greatly reduces the flexibility, since only `tf.*` operations can
effectively be used to have dynamics in there, on the other hand it can greatly increase the performance.
When the graph is built, it is cached (for later re-use), optimized and then executed.
Calling a `tf.function` decorated
function does therefore not make an actualy difference *for the caller</em>. But it is a difference on how the
function behaves.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@z</span><span class="o">.</span><span class="n">function</span>
<span class="k">def</span> <span class="nf">add_rnd</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
     <span class="n">res1</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">()</span>  <span class="c1"># returns a Python scalar. This exact scalar will be constant</span>
     <span class="n">res2</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">z</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">())</span>  <span class="c1"># returns a tf.Tensor. This will be flexible</span>
     <span class="k">return</span> <span class="n">res1</span><span class="p">,</span> <span class="n">res2</span>

<span class="n">res_np1</span><span class="p">,</span> <span class="n">res_tf1</span> <span class="o">=</span> <span class="n">add_rnd</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">res_np2</span><span class="p">,</span> <span class="n">res_tf2</span> <span class="o">=</span> <span class="n">add_rnd</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">res_np1</span> <span class="o">==</span> <span class="n">res_np2</span>  <span class="c1"># they will be the same!</span>
<span class="k">assert</span> <span class="n">res_tf1</span> <span class="o">!=</span> <span class="n">res_tf2</span>  <span class="c1"># these differ</span>
</pre></div>
</div>
<p>While writing TensorFlow is just like Numpy, if we build a graph, only <cite>tf.*</cite> dynamics “survives”.
Important: while values are usually constant, changing a <a class="reference internal" href="zfit.html#zfit.Parameter" title="zfit.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">zfit.Parameter</span></code></a> value with
<code class="xref py py-meth docutils literal notranslate"><span class="pre">)()</span></code> <em>will</em> change the value in the graph as well.</p>
<blockquote>
<div><blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div></blockquote>
<p>&#64;z.function
def add(x, param):</p>
<blockquote>
<div><p>return x + param</p>
</div></blockquote>
<p>param = zfit.Parameter(‘param1’, 36)
assert add_rnd(5, param) == 41
param.set_value(6)
assert add_rnd(5, param) == 42  # the value changed!</p>
</div></blockquote>
<p>Every graph generation takes some additional time and is stored, consuming memory and slowing down the
overall execution process.
To clear all caches and force a rebuild of the graph, <cite>zfit.run.clear_graph_cache()</cite> can be used.</p>
<p>If a function is not decorated with <cite>z.function</cite>, this does not guarantee that it is executed in eager,
as an outer function may uses a decorator. A typical case is the loss, which is decorated. Therefore,
any Model called inside will be evaluated with a graph building first.</p>
<dl class="simple">
<dt><strong>When to use what</strong>:</dt><dd><ul class="simple">
<li><p>Any repeated call (as a typical call to the loss function in the minimization process) is usually
better suited within a <cite>z.function</cite>.</p></li>
<li><p>A single call (e.g. for plotting) or repeated calls <em>with different arguments</em> should rather be run
<em>without</em> a graph built first</p></li>
<li><p>Debugging is usually way easier without graph building. Therefore, set the graph mode to <cite>False</cite></p></li>
<li><p>If the minimization fails but the pdf works without graph, maybe the graph mode can be switched on
for everything to have the same behavior in the pdf as when the loss is called.</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>graph</strong> – <p>Policy for when to build a graph with which function. Currently allowed values are
- <cite>True</cite>: this will make all <code class="xref py py-func docutils literal notranslate"><span class="pre">zfit.z.function()</span></code> decorated function to be traced. Useful</p>
<blockquote>
<div><p>to have a consistent behavior overall, as e.g. a PDF may not be traced if <cite>pdf</cite> or <cite>integrate</cite> is
called, but may be traced when inside a loss.</p>
</div></blockquote>
<ul class="simple">
<li><p><cite>False</cite>: this will make everything execute immediately, like Numpy (this is <strong>not enough</strong> to be
fully Numpy compatible in the sense of using <cite>, also see the `autograd</cite> option)</p></li>
<li><p>’auto’: Something in between, where sampling (currently) and the loss builds a graph but
all model methods, such as <cite>pdf</cite>, <cite>integrate</cite> (except of <cite>*sample*</cite>) do not and are executed
eagerly.</p></li>
<li><p>(<strong>advanced and experimental!</strong>): a dictionary containing the string of a wrapped function identifier
(see also <code class="xref py py-func docutils literal notranslate"><span class="pre">function()</span></code> for more information about this) with a boolean that switches
explicitly on/off the graph building for this type of decorated functions.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.set_mode">
<code class="sig-name descname">set_mode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">graph</span><span class="p">:</span> <span class="n">Union[bool, str, dict, None]</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">autograd</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.set_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.set_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>DEPRECATED! Use <cite>set_graph_mode</cite> or <cite>set_autograd_mode</cite>. (deprecated)</p>
<p>Warning: THIS FUNCTION IS DEPRECATED. It will be removed in a future version.
Instructions for updating:
Use <cite>set_graph_mode</cite> or <cite>set_autograd_mode</cite>.</p>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.set_mode_default">
<code class="sig-name descname">set_mode_default</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.set_mode_default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.set_mode_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the mode to the default of <cite>graph</cite> = ‘auto’ and <cite>autograd</cite> = True.</p>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.execution.RunManager.set_n_cpu">
<code class="sig-name descname">set_n_cpu</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n_cpu</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)">int</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">'auto'</span></em>, <em class="sig-param"><span class="n">strict</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)">None</a><a class="reference internal" href="../_modules/zfit/util/execution.html#RunManager.set_n_cpu"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.RunManager.set_n_cpu" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of cpus to be used by zfit. For more control, use <cite>set_cpus_explicit</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_cpu</strong> – Number of cpus, will be the number for inter-op parallelism</p></li>
<li><p><strong>strict</strong> – If strict, sets intra parallelism to 1</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="zfit.util.execution.eval_object">
<code class="sig-prename descclassname">zfit.util.execution.</code><code class="sig-name descname">eval_object</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)">object</a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)">object</a><a class="reference internal" href="../_modules/zfit/util/execution.html#eval_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.execution.eval_object" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/full_api/zfit.util.execution.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright Copyright 2018, zfit.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>