<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cache &#8212; zfit 0.5.4.dev25+g92364e8 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-2.3.2/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="../index.html"><img src="../_static/zfit-fin_57x24.png">
          zfit</a>
        <span class="navbar-text pull-left"><b>0.5.4.dev25</b></span>

        <div class="nav-collapse">
          <ul class="nav">
            <li class="divider-vertical"></li>
            
                <li><a href="../getting_started.html">Getting started</a></li>
                <li><a href="../introduction.html">Intro</a></li>
                <li><a href="../project.html">Project</a></li>
                <li><a href="../user_api.html">API</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Overview <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html#what-did-just-happen">What did just happen?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">zfit introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/space.html">Space, Observable and Range</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro/space.html#definitions">Definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro/space.html#limits">Limits</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../intro/space.html#functional-limits">Functional limits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intro/space.html#combining-limits">Combining limits</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intro/space.html#using-the-limits">Using the limits</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../intro/parameter.html">Parameter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro/parameter.html#independent-parameter">Independent Parameter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro/parameter.html#dependent-parameter">Dependent Parameter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../intro/model.html">Building a model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro/model.html#predefined-pdfs-and-basic-properties">Predefined PDFs and basic properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro/model.html#composite-pdf">Composite PDF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro/model.html#extended-pdf">Extended PDF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro/model.html#custom-pdf">Custom PDF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../intro/model.html#sampling-from-a-model">Sampling from a Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intro/model.html#tensor-sampling">Tensor sampling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../intro/model.html#playing-with-toys-multiple-samplings">Playing with toys: Multiple samplings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../intro/data.html">Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro/data.html#import-dataset-from-a-root-file">Import dataset from a ROOT file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro/data.html#import-dataset-from-a-pandas-dataframe-or-numpy-ndarray">Import dataset from a pandas DataFrame or Numpy ndarray</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../intro/loss.html">Loss</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro/loss.html#adding-constraints">Adding constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro/loss.html#simultaneous-fits">Simultaneous fits</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../intro/minimize.html">Minimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro/minimize.html#baseline-minimizers">Baseline minimizers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../project.html">zfit Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../project/installation.html">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../project/installation.html#stable-release">Stable release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/installation.html#from-sources">From sources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../project/contributing.html">Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../project/contributing.html#get-started">Get Started!</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/contributing.html#pull-request-guidelines">Pull Request Guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../project/upgrade_guide.html">Upgrade guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../project/upgrade_guide.html#upgrade-from-zfit-0-3-x-to-0-4-0">Upgrade from zfit 0.3.x to 0.4.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/upgrade_guide.html#dependents">Dependents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../project/changelog.html">Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#develop">Develop</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#major-features-and-improvements">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#breaking-changes">Breaking changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#depreceations">Depreceations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#bug-fixes-and-small-changes">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#experimental">Experimental</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#requirement-changes">Requirement changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#thanks">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id1">0.5.3 (02.07.20)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id2">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id3">Breaking changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id4">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id5">Requirement changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id6">0.5.2 (13.05.2020)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id7">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id8">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id9">Requirement changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id10">0.5.1 (24.04.2020)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id11">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id12">Breaking changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#deprecations">Deprecations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id13">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id14">Experimental</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id15">Requirement changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id16">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id17">0.4.3 (11.3.2020)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id18">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#behavioral-changes">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id19">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id20">Requirement changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id21">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id22">0.4.2 (27.2.2020)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id23">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id24">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id25">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id26">Requirement changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id27">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id28">0.4.1 (12.1.20)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id29">Major Features and Improvements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id30">0.4.0 (7.1.2020)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id31">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id32">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id33">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id34">Requirement changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id35">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id36">0.3.7 (6.12.19)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id37">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id38">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id39">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id40">Requirement changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id41">0.3.6 (12.10.19)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id42">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id43">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id44">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id45">Requirement changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id46">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id47">0.3.4 (30-07-19)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id48">Major Features and Improvements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id49">Behavioral changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id50">Bug fixes and small changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id51">Thanks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id52">0.3.3 (15-05-19)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id53">0.3.2 (01-05-19)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#id54">Breaking changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#bugfixes">Bugfixes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../project/changelog.html#improvements">Improvements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id55">0.3.1 (30-04-19)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id56">0.3.0 (2019-03-20)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project/changelog.html#id57">0.0.1 (2018-03-22)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../project/authors.html">Development Lead</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/authors.html#authors">Authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/authors.html#contributors">Contributors</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_api.html">zfit API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user_api/zfit.html">zfit package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user_api/zfit.html#submodules">Submodules</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">cache</a><ul>
<li><a class="reference internal" href="#basic-principle">Basic principle</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
      </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body span12 content" role="main">
      
  <div class="section" id="module-zfit.util.cache">
<span id="cache"></span><h1>cache<a class="headerlink" href="#module-zfit.util.cache" title="Permalink to this headline">¶</a></h1>
<p>Module for caching.</p>
<p>The basic concept of caching in Zfit builds on a “cacher”, that caches a certain value and that
is dependent of “cache_dependents”. By implementing <cite>ZfitCachable</cite>, an object will be able to play both
roles. And most importantly, it has a <cite>_cache</cite> dict, that contains all the cache.</p>
<div class="section" id="basic-principle">
<h2>Basic principle<a class="headerlink" href="#basic-principle" title="Permalink to this headline">¶</a></h2>
<p>A “cacher” adds any dependents that it may comes across with <cite>add_cache_dependents</cite>. For example,
for a loss this would be all pdfs and data. Since <a class="reference internal" href="zfit.html#zfit.Space" title="zfit.Space"><code class="xref py py-class docutils literal notranslate"><span class="pre">Space</span></code></a> is immutable, there is no need to add this
as a dependent. This leads to the “cache_dependent” to register the “cacher” and to remember it.</p>
<p>In case, any “cache_dependent” changes in a way the cache of itself (and any “cacher”) is invalid,
which is done in the simplest case by decorating a method with <cite>&#64;invalidates_cache</cite>, the “cache_dependent”:</p>
<blockquote>
<div><ul class="simple">
<li><p>clears it’s own cache with <cite>reset_cache_self</cite> and</p></li>
<li><p>“clears” any “cacher”s cache with <cite>reset_cache(reseter=self)</cite>, telling the “cacher” that it should
reset the cache. This is also where more fine-grained control (depending on which “cache_dependent”
calls <cite>reset_cache</cite>) can be brought into play.</p></li>
</ul>
</div></blockquote>
<p>Example with a pdf that caches the normalization:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Parameter</span><span class="p">(</span><span class="n">Cachable</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="n">new_value</span><span class="p">):</span>  <span class="c1"># does not require to build a new graph</span>
        <span class="c1"># do something</span>

    <span class="nd">@invalidates_cache</span>
    <span class="k">def</span> <span class="nf">change_limits</span><span class="p">(</span><span class="n">new_limits</span><span class="p">):</span>  <span class="c1"># requires to build a new graph (as an example)</span>
        <span class="c1"># do something</span>

<span class="c1"># create param1, param2 from `Parameter`</span>

<span class="k">class</span> <span class="nc">MyPDF</span><span class="p">(</span><span class="n">Cachable</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_cache_dependents</span><span class="p">([</span><span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">cached_func</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;my_name&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1"># calculations here</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="p">[</span><span class="s1">&#39;my_name&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="p">[</span><span class="s1">&#39;my_name&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
<dl class="py class">
<dt id="zfit.util.cache.FunctionCacheHolder">
<em class="property">class </em><code class="sig-prename descclassname">zfit.util.cache.</code><code class="sig-name descname">FunctionCacheHolder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">wrapped_func</span></em>, <em class="sig-param"><span class="n">cachables</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference internal" href="#zfit.util.cache.ZfitGraphCachable" title="zfit.util.cache.ZfitGraphCachable">zfit.util.cache.ZfitGraphCachable</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)">object</a><span class="p">, </span>Iterable<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#zfit.util.cache.ZfitGraphCachable" title="zfit.util.cache.ZfitGraphCachable">zfit.util.cache.ZfitGraphCachable</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)">object</a><span class="p">]</span><span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">cachables_mapping</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/cache.html#FunctionCacheHolder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.FunctionCacheHolder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zfit.util.cache.GraphCachable" title="zfit.util.cache.GraphCachable"><code class="xref py py-class docutils literal notranslate"><span class="pre">zfit.util.cache.GraphCachable</span></code></a></p>
<p><cite>tf.function</cite> decorated function holder with caching dependencies on inputs.</p>
<p>A <cite>tf.function</cite> creates a new graph for every signature that is encountered. It automatically caches them but
thereby assumes that Python objects are immutable. Any mutation won’t be detected. Therefore, an extra wrapper
is needed. The input signature is compared with firstly checking whether the function is the same and then
doing an equal comparison of the arguments (maybe too costly?).</p>
<dl class="simple">
<dt>The <cite>FunctionCacheHolder</cite> holds the</dt><dd><ul class="simple">
<li><p>original python function which serves as the hash of the object</p></li>
<li><p>wrapped python function, <cite>wrapped_func</cite></p></li>
<li><p>the (keyword-)arguments</p></li>
</ul>
</dd>
</dl>
<p>If any of the keyword arguments changes in a way that the graph cache is invalid, this holder will have
<cite>is_valid</cite> set to False and the <cite>wrapped_func</cite> cannot be used anymore, instead a new <cite>tf.function</cite> should
be created as a call to the <cite>wrapped_func</cite> with the given arguments will result in an outdated graph.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>function</em>) – Python function that serves as a hash of the holder. Notice that equality is different
defined.</p></li>
<li><p><strong>wrapped_func</strong> (<em>tf.function wrapped</em>) – Wrapped <cite>func</cite> with <cite>tf.function</cite>. The holder signals via
<cite>is_valid</cite> whether this function is still valid to be used.</p></li>
<li><p><strong>cachables</strong> – objects that are cached. If they change, the cache is invalidated</p></li>
<li><p><strong>cachables_mapping</strong> (<em>Mapping</em>) – keyword arguments to the function. If the values change, the cache is
invalidated.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="zfit.util.cache.FunctionCacheHolder.IS_TENSOR">
<code class="sig-name descname">IS_TENSOR</code><em class="property"> = &lt;object object&gt;</em><a class="headerlink" href="#zfit.util.cache.FunctionCacheHolder.IS_TENSOR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zfit.util.cache.FunctionCacheHolder.add_cache_deps">
<code class="sig-name descname">add_cache_deps</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cache_deps</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>zfit.core.interfaces.ZfitCachable<span class="p">, </span>Iterable<span class="p">[</span>zfit.core.interfaces.ZfitCachable<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">allow_non_cachable</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#zfit.util.cache.FunctionCacheHolder.add_cache_deps" title="Permalink to this definition">¶</a></dt>
<dd><p>Add dependencies that render the cache invalid if they change.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cache_deps</strong> (<a class="reference internal" href="#zfit.util.cache.ZfitGraphCachable" title="zfit.util.cache.ZfitGraphCachable"><em>ZfitGraphCachable</em></a>) – </p></li>
<li><p><strong>allow_non_cachable</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – If <cite>True</cite>, allow <cite>cache_dependents</cite> to be non-cachables.
If <cite>False</cite>, any <cite>cache_dependents</cite> that is not a <cite>ZfitCachable</cite> will raise an error.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – if one of the <cite>cache_dependents</cite> is not a <cite>ZfitCachable</cite> _and_ <cite>allow_non_cachable</cite>
    if <cite>False</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.cache.FunctionCacheHolder.create_immutable">
<code class="sig-name descname">create_immutable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span></em>, <em class="sig-param"><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/cache.html#FunctionCacheHolder.create_immutable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.FunctionCacheHolder.create_immutable" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a tuple of the args and kwargs by combining them as args + kwargs.keys() + kwargs.values()`</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – list like</p></li>
<li><p><strong>kwargs</strong> – dict-like</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="zfit.util.cache.FunctionCacheHolder.graph_caching_methods">
<code class="sig-name descname">graph_caching_methods</code><em class="property"> = []</em><a class="headerlink" href="#zfit.util.cache.FunctionCacheHolder.graph_caching_methods" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="zfit.util.cache.FunctionCacheHolder.instances">
<code class="sig-name descname">instances</code><em class="property"> = &lt;_weakrefset.WeakSet object&gt;</em><a class="headerlink" href="#zfit.util.cache.FunctionCacheHolder.instances" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zfit.util.cache.FunctionCacheHolder.register_cacher">
<code class="sig-name descname">register_cacher</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cacher</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>zfit.core.interfaces.ZfitCachable<span class="p">, </span>Iterable<span class="p">[</span>zfit.core.interfaces.ZfitCachable<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zfit.util.cache.FunctionCacheHolder.register_cacher" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a <cite>cacher</cite> that caches values produces by this instance; a dependent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>)</strong> (<em>cacher</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.cache.FunctionCacheHolder.reset_cache">
<code class="sig-name descname">reset_cache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">reseter</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#zfit.util.cache.ZfitGraphCachable" title="zfit.util.cache.ZfitGraphCachable">zfit.util.cache.ZfitGraphCachable</a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#zfit.util.cache.FunctionCacheHolder.reset_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zfit.util.cache.FunctionCacheHolder.reset_cache_self">
<code class="sig-name descname">reset_cache_self</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/cache.html#FunctionCacheHolder.reset_cache_self"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.FunctionCacheHolder.reset_cache_self" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cache of self and all dependent cachers.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zfit.util.cache.GraphCachable">
<em class="property">class </em><code class="sig-prename descclassname">zfit.util.cache.</code><code class="sig-name descname">GraphCachable</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/cache.html#GraphCachable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.GraphCachable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#zfit.util.cache.ZfitGraphCachable" title="zfit.util.cache.ZfitGraphCachable"><code class="xref py py-class docutils literal notranslate"><span class="pre">zfit.util.cache.ZfitGraphCachable</span></code></a></p>
<dl class="py method">
<dt id="zfit.util.cache.GraphCachable.add_cache_deps">
<code class="sig-name descname">add_cache_deps</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cache_deps</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>zfit.core.interfaces.ZfitCachable<span class="p">, </span>Iterable<span class="p">[</span>zfit.core.interfaces.ZfitCachable<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">allow_non_cachable</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/cache.html#GraphCachable.add_cache_deps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.GraphCachable.add_cache_deps" title="Permalink to this definition">¶</a></dt>
<dd><p>Add dependencies that render the cache invalid if they change.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cache_deps</strong> (<a class="reference internal" href="#zfit.util.cache.ZfitGraphCachable" title="zfit.util.cache.ZfitGraphCachable"><em>ZfitGraphCachable</em></a>) – </p></li>
<li><p><strong>allow_non_cachable</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – If <cite>True</cite>, allow <cite>cache_dependents</cite> to be non-cachables.
If <cite>False</cite>, any <cite>cache_dependents</cite> that is not a <cite>ZfitCachable</cite> will raise an error.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – if one of the <cite>cache_dependents</cite> is not a <cite>ZfitCachable</cite> _and_ <cite>allow_non_cachable</cite>
    if <cite>False</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="zfit.util.cache.GraphCachable.graph_caching_methods">
<code class="sig-name descname">graph_caching_methods</code><em class="property"> = []</em><a class="headerlink" href="#zfit.util.cache.GraphCachable.graph_caching_methods" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="zfit.util.cache.GraphCachable.instances">
<code class="sig-name descname">instances</code><em class="property"> = &lt;_weakrefset.WeakSet object&gt;</em><a class="headerlink" href="#zfit.util.cache.GraphCachable.instances" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zfit.util.cache.GraphCachable.register_cacher">
<code class="sig-name descname">register_cacher</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cacher</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>zfit.core.interfaces.ZfitCachable<span class="p">, </span>Iterable<span class="p">[</span>zfit.core.interfaces.ZfitCachable<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/cache.html#GraphCachable.register_cacher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.GraphCachable.register_cacher" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a <cite>cacher</cite> that caches values produces by this instance; a dependent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>)</strong> (<em>cacher</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.cache.GraphCachable.reset_cache">
<code class="sig-name descname">reset_cache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">reseter</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#zfit.util.cache.ZfitGraphCachable" title="zfit.util.cache.ZfitGraphCachable">zfit.util.cache.ZfitGraphCachable</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/cache.html#GraphCachable.reset_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.GraphCachable.reset_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zfit.util.cache.GraphCachable.reset_cache_self">
<code class="sig-name descname">reset_cache_self</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/cache.html#GraphCachable.reset_cache_self"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.GraphCachable.reset_cache_self" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cache of self and all dependent cachers.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="zfit.util.cache.ZfitGraphCachable">
<em class="property">class </em><code class="sig-prename descclassname">zfit.util.cache.</code><code class="sig-name descname">ZfitGraphCachable</code><a class="reference internal" href="../_modules/zfit/util/cache.html#ZfitGraphCachable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.ZfitGraphCachable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="py method">
<dt id="zfit.util.cache.ZfitGraphCachable.add_cache_deps">
<em class="property">abstract </em><code class="sig-name descname">add_cache_deps</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cache_dependents</span></em>, <em class="sig-param"><span class="n">allow_non_cachable</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/cache.html#ZfitGraphCachable.add_cache_deps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.ZfitGraphCachable.add_cache_deps" title="Permalink to this definition">¶</a></dt>
<dd><p>Add dependents that render the cache invalid if they change.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cache_dependents</strong> (<a class="reference internal" href="#zfit.util.cache.ZfitGraphCachable" title="zfit.util.cache.ZfitGraphCachable"><em>ZfitGraphCachable</em></a>) – </p></li>
<li><p><strong>allow_non_cachable</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – If <cite>True</cite>, allow <cite>cache_dependents</cite> to be non-cachables.
If <cite>False</cite>, any <cite>cache_dependents</cite> that is not a <cite>ZfitCachable</cite> will raise an error.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.8)"><strong>TypeError</strong></a> – if one of the <cite>cache_dependents</cite> is not a <cite>ZfitCachable</cite> _and_ <cite>allow_non_cachable</cite>
    if <cite>False</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="zfit.util.cache.ZfitGraphCachable.register_cacher">
<em class="property">abstract </em><code class="sig-name descname">register_cacher</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cacher</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#zfit.util.cache.ZfitGraphCachable" title="zfit.util.cache.ZfitGraphCachable">zfit.util.cache.ZfitGraphCachable</a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/cache.html#ZfitGraphCachable.register_cacher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.ZfitGraphCachable.register_cacher" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zfit.util.cache.ZfitGraphCachable.reset_cache">
<em class="property">abstract </em><code class="sig-name descname">reset_cache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">reseter</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/cache.html#ZfitGraphCachable.reset_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.ZfitGraphCachable.reset_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="zfit.util.cache.ZfitGraphCachable.reset_cache_self">
<em class="property">abstract </em><code class="sig-name descname">reset_cache_self</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/cache.html#ZfitGraphCachable.reset_cache_self"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.ZfitGraphCachable.reset_cache_self" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cache of self and all dependent cachers.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="zfit.util.cache.clear_graph_cache">
<code class="sig-prename descclassname">zfit.util.cache.</code><code class="sig-name descname">clear_graph_cache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/cache.html#clear_graph_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.clear_graph_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="zfit.util.cache.invalidate_graph">
<code class="sig-prename descclassname">zfit.util.cache.</code><code class="sig-name descname">invalidate_graph</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/zfit/util/cache.html#invalidate_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zfit.util.cache.invalidate_graph" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/full_api/zfit.util.cache.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright Copyright 2018, zfit.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.1.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>